<nz-modal class="create-modal" nzWidth='600px' [nzTitle]="'task.create' | translate" [(nzVisible)]="showVisible" (nzOnCancel)="concelCreateTask()" [nzFooter]='null'>
    <ng-container *nzModalContent>
        <form class="create-task" nz-form [formGroup]="taskForm" >
            <nz-form-item class="item-name">
              <nz-form-label  nzRequired >Name</nz-form-label>
              <nz-form-control  [nzErrorTip]="nameErrorTpl">
                  <nz-input-group [nzSuffix]="nameSuffixTpl" class="ant-input-affix-wrapper-textarea-with-clear-btn">
                      <textarea
                          nz-input
                          formControlName="name" 
                          id="name"
                          [placeholder]="'task.namePlaceholder' | translate"
                          [nzAutosize]="{ minRows: 1, maxRows: 2 }"
                  ></textarea>
                  </nz-input-group>
                  <div class="input-length">{{taskForm.value.name?.length||0}}/40</div>      
                  <ng-template #nameSuffixTpl>
                      <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="name" (click)="name = ''"></i>
                  </ng-template>
                  <ng-template #nameErrorTpl let-control>
                      <ng-container *ngIf="control.hasError('required')">
                        {{'task.errorNameIsNullTip' | translate}}
                      </ng-container>
                      <ng-container *ngIf="control.hasError('maxlength')">
                        {{'task.errorNameOver40Tip' | translate}}
                      </ng-container>
                  </ng-template>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item class="item-content">
              <nz-form-label nzRequired >content</nz-form-label>
              <nz-form-control [nzErrorTip]="contentErrorTpl">
                  <nz-input-group [nzSuffix]="contentSuffixTpl" class="ant-input-affix-wrapper-textarea-with-clear-btn">
                      <textarea
                          nz-input
                          formControlName="content" 
                          id="content"
                          [placeholder]="'task.contentPlaceholder' | translate"
                          [nzAutosize]="{ minRows: 1, maxRows: 8 }"
                      ></textarea>
                  </nz-input-group>
                  <div class="input-length">{{taskForm.value.content?.length||0}}/200</div>  
                  <ng-template #contentSuffixTpl>
                      <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="content" (click)="content = ''"></i>
                  </ng-template>
                  <ng-template #contentErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                        {{'task.errorContentIsNullTip' | translate}}
                      </ng-container>
                      <ng-container *ngIf="control.hasError('maxlength')">
                        {{'task.errorontentIsNullTip' | translate}}
                      </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item *ngIf = 'isCreate' nz-row class="btn-group">
              <nz-form-control>
                <button nz-button nzType="primary" (click)='createTask()'>确认</button>
                <button nz-button nzType="default" (click)='concelCreateTask()'>取消</button>
              </nz-form-control>
            </nz-form-item>
        </form>
        <div class="btn-group" *ngIf = 'isEdit'>
            <nz-select [(ngModel)]="task.status">
                <nz-option [nzValue]="item.key" [nzLabel]="item.label" *ngFor="let item of TaskStatusList"></nz-option>
            </nz-select>
            <button nz-button nzType="default">删除</button>
        </div>
    </ng-container>
  </nz-modal>

